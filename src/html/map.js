
let data = {
  chart1: {},
  mapdata: [
    {"JZWMC":"综合实验楼","RS":174894,"JZJD":"118.856278142911","JZWD":"32.0277010409315","XQH":"01"},
    {"JZWMC":"南京理工大学医院","RS":37672,"JZJD":"118.85148464604","JZWD":"32.0309109216073","XQH":"01"},
    {"JZWMC":"基础实验楼","RS":26928,"JZJD":"118.859570787479","JZWD":"32.0264000414178","XQH":"01"},
    {"JZWMC":"动力学院","RS":25432,"JZJD":"118.858528701411","JZWD":"32.02476055616","XQH":"01"},
    {"JZWMC":"第四教学楼","RS":23800,"JZJD":"118.855691076727","JZWD":"32.0244554613682","XQH":"01"},
    {"JZWMC":"工程训练中心","RS":23664,"JZJD":"118.860661445981","JZWD":"32.0261469569417","XQH":"01"},
    {"JZWMC":"孝陵卫街200号362栋","RS":22984,"JZJD":"118.859325145087","JZWD":"32.02819799017","XQH":"01"},
    {"JZWMC":"新图书馆","RS":21896,"JZJD":"118.856164310756","JZWD":"32.0260091543292","XQH":"01"},
    {"JZWMC":"材料楼（在建）","RS":19856,"JZJD":"118.857685500831","JZWD":"32.0269972609745","XQH":"01"},
    {"JZWMC":"第二教学楼","RS":15504,"JZJD":"118.857550179609","JZWD":"32.0278595808224","XQH":"01"},
    {"JZWMC":"老图书馆","RS":14960,"JZJD":"118.855249100857","JZWD":"32.0279064659212","XQH":"01"},
    {"JZWMC":"材料科学与工程学院","RS":13328,"JZJD":"118.857722472558","JZWD":"32.0265464879852","XQH":"01"},
    {"JZWMC":"第三教学楼","RS":10744,"JZJD":"118.857657012825","JZWD":"32.0250675141347","XQH":"01"},
    {"JZWMC":"孝陵卫街200号339栋","RS":10064,"JZJD":"118.857731766331","JZWD":"32.0260497101776","XQH":"01"},
    {"JZWMC":"化工学院/环境与生物工程学院","RS":8976,"JZJD":"118.859606022556","JZWD":"32.0274454116796","XQH":"01"},
    {"JZWMC":"孝陵卫街200号338栋","RS":8568,"JZJD":"118.857645350003","JZWD":"32.0256558739334","XQH":"01"},
    {"JZWMC":"孝陵卫街200号380栋","RS":8160,"JZJD":"118.859613793634","JZWD":"32.0256289294549","XQH":"01"},
    {"JZWMC":"校办公大楼","RS":7752,"JZJD":"118.854626546649","JZWD":"32.0315688092299","XQH":"01"},
    {"JZWMC":"第一教学楼","RS":7344,"JZJD":"118.858654603184","JZWD":"32.0257835173452","XQH":"01"},
    {"JZWMC":"留园/明苑美食广场","RS":6936,"JZJD":"118.854255058683","JZWD":"32.0241977703465","XQH":"01"},
    {"JZWMC":"孝陵卫街200号353栋","RS":6800,"JZJD":"118.860489749735","JZWD":"32.0273040771834","XQH":"01"},
    {"JZWMC":"艺文馆","RS":6664,"JZJD":"118.854742856718","JZWD":"32.0299073647066","XQH":"01"},
    {"JZWMC":"财务处","RS":6256,"JZJD":"118.85556703822","JZWD":"32.0296291540926","XQH":"01"},
    {"JZWMC":"孝陵卫街200号332栋","RS":5712,"JZJD":"118.858610790098","JZWD":"32.0239828313709","XQH":"01"},
    {"JZWMC":"孝陵卫街200号382栋","RS":5712,"JZJD":"118.859412611879","JZWD":"32.0244686174865","XQH":"01"},
    {"JZWMC":"智能机器人研究所","RS":5576,"JZJD":"118.860097620992","JZWD":"32.024453972274","XQH":"01"},
    {"JZWMC":"学术交流中心","RS":5576,"JZJD":"118.857039716925","JZWD":"32.029676484817","XQH":"01"},
    {"JZWMC":"老年活动中心","RS":5576,"JZJD":"118.857265320695","JZWD":"32.0339753662805","XQH":"01"},
    {"JZWMC":"孝陵卫街200号247栋","RS":4488,"JZJD":"118.853513639747","JZWD":"32.0247881755567","XQH":"01"},
    {"JZWMC":"星苑美食广场","RS":2720,"JZJD":"118.85879672030093","JZWD":"32.022708652213225","XQH":"01"},
    {"JZWMC":"孝陵卫街200号333栋","RS":2176,"JZJD":"118.858862206859","JZWD":"32.0238089428191","XQH":"01"},
    {"JZWMC":"逸夫教学楼","RS":1088,"JZJD":"118.856583966533","JZWD":"32.0247267055787","XQH":"01"},
    {"JZWMC":"孝陵卫街200号383栋","RS":1088,"JZJD":"118.859408195472","JZWD":"32.0242381717353","XQH":"01"},
    {"JZWMC":"孝陵卫街200号432栋","RS":1088,"JZJD":"118.861385947278","JZWD":"32.0283646643818","XQH":"01"},
    {"JZWMC":"体育部","RS":1088,"JZJD":"118.854099746306","JZWD":"32.0271154737467","XQH":"01"},
    {"JZWMC":"学生第二、第三食堂","RS":952,"JZJD":"118.852538891965","JZWD":"32.0276727263697","XQH":"01"},
    {"JZWMC":"工会","RS":816,"JZJD":"118.85660734971","JZWD":"32.0338445863126","XQH":"01"},
    {"JZWMC":"教工（研究生）餐厅","RS":816,"JZJD":"118.853319134074","JZWD":"32.0331215541121","XQH":"01"}
  ],
  chart2: {},
  geoCoordMap: {
    "校办公大楼":["118.854626546649","32.0315688092299"],
    "研究生宿舍A":["118.853293147741","32.0316746945675"],
    "孝陵卫街200号4幢":["118.854079114993","32.0319118902233"],
    "孝陵卫街200号3幢":["118.854663093402","32.0319300031519"],
    "孝陵卫街200号109幢":["118.853419510922","32.0320815454088"],
    "孝陵卫街200号6幢":["118.854052528838","32.0322043176171"],
    "孝陵卫街200号5幢":["118.854648312286","32.0322279376219"],
    "孝陵卫街200号110幢":["118.853431160996","32.0323507457617"],
    "孝陵卫街200号8幢":["118.855039572151","32.0324568293636"],
    "孝陵卫街200号7幢":["118.855701004122","32.0324589631898"],
    "孝陵卫街200号9幢":["118.855794885807","32.0327442446184"],
    "孝陵卫街200号10幢":["118.854996721481","32.0327940777029"],
    "孝陵卫街200号11幢":["118.855689059901","32.0330979907338"],
    "孝陵卫街200号12幢":["118.854970482386","32.0330901775178"],
    "孝陵卫街200号13幢":["118.855766689734","32.0333499693844"],
    "孝陵卫街200号14幢":["118.855084891293","32.0333579975574"],
    "孝陵卫街200号15幢":["118.855776325515","32.0336602938642"],
    "孝陵卫街200号16幢":["118.854945266778","32.0337038118756"],
    "孝陵卫街200号17幢":["118.854306587923","32.0330921159038"],
    "孝陵卫街200号18幢":["118.854322174422","32.0333853586213"],
    "孝陵卫街200号19幢":["118.854271934121","32.0337025863734"],
    "孝陵卫街200号29幢":["118.854347084779","32.0340098299006"],
    "孝陵卫街200号31幢":["118.854088308047","32.0343370075619"],
    "孝陵卫街200号32幢":["118.853209529608","32.0342957525236"],
    "孝陵卫街200号30幢":["118.85322129203","32.0340175954243"],
    "孝陵卫街200号27幢":["118.853664189457","32.0337734550538"],
    "孝陵卫街200号28幢":["118.853061653197","32.0337782337302"],
    "教工（研究生）餐厅":["118.853319134074","32.0331215541121"],
    "孝陵卫街200号112幢":["118.853080222584","32.0329420565581"],
    "孝陵卫街200号113幢":["118.853375095399","32.0328684003116"],
    "孝陵卫街200号114幢":["118.853623873291","32.0329344647916"],
    "孝陵卫街200号111幢":["118.853442086493","32.0325994642619"],
    "青年教师公寓":["118.852881078183","32.0327853153018"],
    "银行":["118.852870140222","32.0322906129753"],
    "孝陵卫街200号105幢":["118.852908981655","32.0318996841483"],
    "孝陵卫街200号501幢":["118.852226421597","32.0316313511357"],
    "孝陵卫街200号502幢":["118.852220216459","32.031919857598"],
    "孝陵卫街200号503幢":["118.85216107184","32.0322311853011"],
    "孝陵卫街200号504幢":["118.852211008657","32.0325493869226"],
    "孝陵卫街200号505幢":["118.851604921016","32.031913982565"],
    "孝陵卫街200号506幢":["118.851667681972","32.0322297646772"],
    "孝陵卫街200号507幢":["118.851629211183","32.0325286192059"],
    "孝陵卫街200号570幢":["118.852268022439","32.0328021661333"],
    "孝陵卫街200号571幢":["118.851622753944","32.0328010975412"],
    "孝陵卫街200号572幢":["118.852216292069","32.0331236746951"],
    "孝陵卫街200号573幢":["118.851607834783","32.03313905986"],
    "孝陵卫街200号574幢":["118.852164780112","32.0333913448298"],
    "孝陵卫街200号575幢":["118.851574180754","32.033422695913"],
    "孝陵卫街200号511幢":["118.851554551458","32.0336928154169"],
    "孝陵卫街200号512幢":["118.852261912516","32.033736196387"],
    "孝陵卫街200号513幢":["118.851547090208","32.0339506709767"],
    "孝陵卫街200号514幢":["118.852248564462","32.0339980443609"],
    "孝陵卫街200号515幢":["118.851556826237","32.0342300722651"],
    "孝陵卫街200号516幢":["118.852226374281","32.0342748188417"],
    "孝陵卫街200号517幢":["118.851508128217","32.0344813565295"],
    "孝陵卫街200号518幢":["118.852403291181","32.0344780785461"],
    "孝陵卫街200号519幢":["118.852226938902","32.0346975189076"],
    "孝陵卫街200号520幢":["118.85157499314","32.0346571293913"],
    "孝陵卫街200号521幢":["118.852537251915","32.0348462609652"],
    "孝陵卫街200号522幢":["118.851770773983","32.034820808663"],
    "孝陵卫街200号539幢":["118.851485315056","32.0352672625181"],
    "孝陵卫街200号538幢":["118.852212624473","32.0349649003646"],
    "孝陵卫街200号537幢":["118.851565009003","32.0349458851389"],
    "孝陵卫街200号540幢":["118.852098692753","32.0352735739608"],
    "孝陵卫街200号541幢":["118.851425927177","32.0355387372118"],
    "孝陵卫街200号542幢":["118.852061870325","32.0355519275577"],
    "南京理工大学附属幼儿园":["118.851526805842","32.0359186114234"],
    "孝陵卫街200号536幢":["118.850736855271","32.0354589600658"],
    "孝陵卫街200号535幢":["118.850739212879","32.0351913207255"],
    "孝陵卫街200号534幢":["118.850886364364","32.0349372786221"],
    "孝陵卫街200号533幢":["118.850854102485","32.0346854280432"],
    "孝陵卫街200号532幢":["118.85083961143","32.0344145564126"],
    "孝陵卫街200号531幢":["118.850855769512","32.0341673258596"],
    "孝陵卫街200号530幢":["118.850862844078","32.0339030631847"],
    "第四舍":["118.853502224839","32.0277663787146"],
    "第三舍":["118.854212404684","32.0277825802701"],
    "第六舍":["118.853499161627","32.0273982231549"],
    "第五舍":["118.85423927287","32.0274050801665"],
    "老图书馆":["118.855249100857","32.0279064659212"],
    "综合实验楼":["118.856278142911","32.0277010409315"],
    "第二教学楼":["118.857550179609","32.0278595808224"],
    "孝陵卫街200号345栋":["118.857661057378","32.0284766731554"],
    "孝陵卫街200号235栋":["118.853598588618","32.0268278892742"],
    "篮球馆":["118.853454617491","32.0263642469281"],
    "第十二舍":["118.854296107566","32.0256715606381"],
    "第七舍":["118.853797629982","32.0260391701485"],
    "第八舍":["118.85323117116","32.0260232060131"],
    "第九舍":["118.853660504228","32.0255349865532"],
    "第十舍":["118.853738349457","32.0251247302676"],
    "第十一舍":["118.854294422445","32.0252645137023"],
    "第十五舍":["118.854077234472","32.0248988927374"],
    "孝陵卫街200号247栋":["118.853513639747","32.0247881755567"],
    "第二十二舍":["118.85259440501","32.024704582616"],
    "第二十一舍":["118.851843163976","32.0246980057531"],
    "第二十三舍A":["118.851807651391","32.0250422778076"],
    "第二十四舍B":["118.852562582052","32.0253265055548"],
    "第二十三舍B":["118.851771614302","32.0253197132433"],
    "第二十四舍A":["118.852571157608","32.0250421080469"],
    "第十七舍C":["118.852759054704","32.0243694622659"],
    "第十六舍C":["118.851933687695","32.0243624895245"],
    "第十六舍B":["118.85188082888","32.0240683061537"],
    "第十七舍B":["118.8525280029","32.0241247438922"],
    "第十六舍A":["118.851930178616","32.0237963167811"],
    "第十七舍A":["118.852702348639","32.0238053989438"],
    "第二十舍B":["118.853452328545","32.0241425445608"],
    "第四教学楼":["118.855691076727","32.0244554613682"],
    "兵器教学楼/档案馆（校史展览馆）":["118.857641966589","32.0241968121182"],
    "逸夫教学楼":["118.856583966533","32.0247267055787"],
    "南六门":["118.856608378022","32.0234505766155"],
    "孝陵卫街200号393-2栋":["118.858683664092","32.0235548545321"],
    "孝陵卫街200号393-1栋":["118.859024287251","32.0235329679946"],
    "孝陵卫街200号333栋":["118.858862206859","32.0238089428191"],
    "研究生院":["118.854892278621","32.0285025755445"],
    "孝陵卫街200号332栋":["118.858610790098","32.0239828313709"],
    "教务处":["118.855086798203","32.0285019365488"],
    "计算机科学与工程学院/自动化学院":["118.862536859865","32.0242454210933"],
    "华萃苑":["118.858274648931","32.0310025917961"],
    "实验室":["118.858426136928","32.0242188455314"],
    "实验室1":["118.858684207326","32.0242579710381"],
    "动力学院":["118.858528701411","32.02476055616"],
    "五号门":["118.859321325381","32.0231798236543"],
    "外国语学院":["118.860447114896","32.0300249920398"],
    "第三教学楼":["118.857657012825","32.0250675141347"],
    "孝陵卫街200号338栋":["118.857645350003","32.0256558739334"],
    "第一教学楼":["118.858654603184","32.0257835173452"],
    "孝陵卫街200号339栋":["118.857731766331","32.0260497101776"],
    "孝陵卫街200号370栋":["118.858605088491","32.0263432580307"],
    "材料科学与工程学院":["118.857722472558","32.0265464879852"],
    "保卫处":["118.856073067823","32.0294439371336"],
    "孝陵卫街200号368栋":["118.858612468255","32.0270778342171"],
    "孝陵卫街200号367栋":["118.858600757074","32.0274325007356"],
    "孝陵卫街200号366栋":["118.858535848496","32.0277917639213"],
    "孝陵卫街200号365栋":["118.858604941432","32.0282202182831"],
    "设计艺术与传媒学院":["118.858544738604","32.0285630520732"],
    "民爆楼":["118.859363151087","32.0286469004871"],
    "孝陵卫街200号362栋":["118.859325145087","32.02819799017"],
    "孝陵卫街200号364栋":["118.86024064874","32.0281419849789"],
    "孝陵卫街200号361栋":["118.860152059752","32.0285253171233"],
    "孝陵卫街200号351栋":["118.860476099225","32.0277705863801"],
    "南京理工大学":["118.860313833872","32.0286041763836"],
    "化工学院/环境与生物工程学院":["118.859606022556","32.0274454116796"],
    "孝陵卫街200号353栋":["118.860489749735","32.0273040771834"],
    "孝陵卫街200号384栋":["118.860483163249","32.0267814802548"],
    "工程训练中心":["118.860661445981","32.0261469569417"],
    "基础实验楼":["118.859570787479","32.0264000414178"],
    "孝陵卫街200号380栋":["118.859613793634","32.0256289294549"],
    "机械工程学院":["118.859822805201","32.024959249832"],
    "智能机器人研究所":["118.860097620992","32.024453972274"],
    "孝陵卫街200号379栋":["118.860647552561","32.0243507049205"],
    "孝陵卫街200号383栋":["118.859408195472","32.0242381717353"],
    "孝陵卫街200号382栋":["118.859412611879","32.0244686174865"],
    "电子工程与光电技术学院/理学院":["118.862358287945","32.0251384082274"],
    "孝陵卫街200号432栋":["118.861385947278","32.0283646643818"],
    "孝陵卫街200号431栋":["118.861701113985","32.0282694585322"],
    "孝陵卫街200号436栋":["118.86178341837","32.0284700267801"],
    "孝陵卫街200号435栋":["118.862478264004","32.028493481581"],
    "理工学院汽车队":["118.861301843158","32.0271234835264"],
    "安全工程系":["118.86266252116","32.0275269577825"],
    "艺文馆":["118.854742856718","32.0299073647066"],
    "财务处":["118.85556703822","32.0296291540926"],
    "西门（七号门）":["118.850946881361","32.0290885063768"],
    "南京理工大学医院":["118.85148464604","32.0309109216073"],
    "经济管理学院/人文与社会科学学院":["118.859582992454","32.0296134068808"],
    "后勤管理中心住宅管理科":["118.860471248236","32.0297157771696"],
    "孝陵卫街200号73栋":["118.859694471734","32.0304747461464"],
    "孝陵卫街200号157栋":["118.859653012193","32.0310086397137"],
    "孝陵卫街200号148栋":["118.860299169385","32.0309043623206"],
    "孝陵卫街200号81栋":["118.862764499175","32.0299584097524"],
    "研究生宿舍B/82栋":["118.862845420022","32.0307598193863"],
    "孝陵卫街200号80栋":["118.86102434224","32.0293980094543"],
    "紫麓宾馆国际交流合作处":["118.858495757037","32.0299958667458"],
    "紫麓宾馆东楼":["118.858735141071","32.0305487784164"],
    "紫麓宾馆西楼":["118.857922644008","32.0305607761189"],
    "学术交流中心":["118.857039716925","32.029676484817"],
    "接待中心采供部":["118.857808443824","32.031023546831"],
    "高等职业技术学院大门":["118.85321608819","32.01915487934"],
    "住宅楼1":["118.853637423854","32.0196796225129"],
    "宿舍楼1":["118.854215399989","32.019551975145"],
    "教学楼":["118.854658812973","32.0199548985079"],
    "食堂":["118.855297447216","32.019295996571"],
    "高等职业技术学院8栋":["118.855941266252","32.0193194049492"],
    "办公楼1":["118.855644746377","32.0190153169891"],
    "办公楼2":["118.855618341473","32.0187521492675"],
    "宿舍楼2":["118.855749498555","32.0184392836514"],
    "宿舍楼3":["118.855189687703","32.0185056120037"],
    "宿舍楼4":["118.854445370882","32.0185359125754"],
    "浴室":["118.854061200094","32.0184643335543"],
    "宿舍楼5":["118.853678363424","32.0185208735589"],
    "孝陵卫街200号15栋":["118.853349740339","32.0185049704276"],
    "孝陵卫街200号23栋":["118.853753901938","32.0183200195829"],
    "电机房":["118.853383411412","32.0181945812524"],
    "住宅楼2":["118.853618064773","32.0199469516327"],
    "住宅楼3":["118.85414974691","32.0199632074537"],
    "第十三舍":["118.85428202258","32.026093187859"],
    "第二十舍C":["118.853308291113","32.0245628946641"],
    "第二十舍A":["118.853282496644","32.023951948765"],
    "离休干部活动室":["118.853470694066","32.0333297739203"],
    "设计艺术与传媒学院实验中心":["118.857748679656","32.0284986984084"],
    "体育部":["118.854099746306","32.0271154737467"],
    "粉体中心楼":["118.864055897728","32.0234332491929"],
    "南京理工大学创业孵化园":["118.856639986409","32.022406309891"],
    "第二十九舍":["118.855958313336","32.0228442809527"],
    "第三十舍":["118.856650986955","32.0228533489544"],
    "第三十一舍":["118.857283119858","32.0228127827426"],
    "体育馆":["118.851511480906","32.0297664044085"],
    "新图书馆":["118.856164310756","32.0260091543292"],
    "研究生宿舍二期（在建）":["118.854127710426","32.0265027861978"],
    "材料楼（在建）":["118.857685500831","32.0269972609745"],
    "第三十二舍":["118.859298295692","32.0228736155536"],
    "第三十三舍":["118.859306402155","32.0223396482292"],
    "星苑美食广场":["118.85879672030093","32.022708652213225"],
    "教育超市（金升店）":["118.85302660706462","32.02576677382986"],
    "金沙湾教育超市":["118.85373210772524","32.02462679056161"],
    "孝陵卫街200号529幢":["118.850897176023","32.0336411113592"],
    "孝陵卫街200号566幢":["118.850644441695","32.0317977383213"],
    "孝陵卫街200号567幢":["118.850644345171","32.0320656579388"],
    "孝陵卫街200号568幢":["118.850619004187","32.0323439188675"],
    "孝陵卫街200号569幢":["118.850638237688","32.0326327060412"],
    "孝陵卫街200号565幢":["118.851045393388","32.0327484150722"],
    "孝陵卫街200号564幢":["118.851016202797","32.0324750250541"],
    "孝陵卫街200号563幢":["118.851057444236","32.0321709041672"],
    "孝陵卫街200号562幢":["118.851072588702","32.0319098354016"],
    "孝陵卫街200号561幢":["118.851101730946","32.0316266832782"],
    "三号门学生宿舍":["118.853016109656","32.0356085996939"],
    "正门（二号门）":["118.8564177069","32.034813631474"],
    "电信局":["118.857163325016","32.035046320524"],
    "工会":["118.85660734971","32.0338445863126"],
    "孝陵卫街200号42幢":["118.856924938464","32.0340123140159"],
    "老年活动中心":["118.857265320695","32.0339753662805"],
    "孝陵卫街200号125幢":["118.857050779232","32.0335812735473"],
    "孝陵卫街200号124幢":["118.857013643241","32.0333276195049"],
    "孝陵卫街200号123幢":["118.857012745726","32.033030730111"],
    "孝陵卫街200号122幢":["118.857039414387","32.0327454455542"],
    "孝陵卫街200号121幢":["118.85700490994","32.0324737632636"],
    "孝陵卫街200号120幢":["118.856936406613","32.0321952026055"],
    "孝陵卫街200号119幢":["118.856936698506","32.0319317171269"],
    "孝陵卫街200号118幢":["118.85698422844","32.0316392693532"],
    "科技会堂":["118.857313058215","32.0315467621817"],
    "孝陵卫街200号171幢":["118.858491638264","32.0314155070366"],
    "孝陵卫街200号172幢":["118.858364679863","32.0317922358526"],
    "孝陵卫街200号173幢":["118.858400847884","32.0320257773052"],
    "孝陵卫街200号174幢":["118.858398654149","32.0322825042693"],
    "孝陵卫街200号175幢":["118.858304649641","32.0328683464107"],
    "孝陵卫街200号180幢":["118.857780969135","32.0320417123156"],
    "孝陵卫街200号181幢":["118.857757737013","32.0323162427223"],
    "孝陵卫街200号182幢":["118.85776317944","32.0326131150792"],
    "孝陵卫街200号115幢":["118.85773032574","32.032829224886"],
    "孝陵卫街200号116幢":["118.857826076628","32.0330280864977"],
    "孝陵卫街200号170幢":["118.858957666536","32.0329020782646"],
    "孝陵卫街200号169幢":["118.858919320581","32.0326933923559"],
    "孝陵卫街200号168幢":["118.858903815002","32.03241053544"],
    "孝陵卫街200号167幢":["118.858853747407","32.0321757112018"],
    "孝陵卫街200号166幢":["118.858897798983","32.0318761406351"],
    "孝陵卫街200号165幢":["118.858986846933","32.031511706444"],
    "孝陵卫街200号158幢":["118.859678615624","32.0314841610086"],
    "孝陵卫街200号162幢":["118.859692142404","32.0325248003158"],
    "孝陵卫街200号163幢":["118.859736149033","32.0327965434374"],
    "孝陵卫街200号154幢":["118.860395246893","32.0328368190022"],
    "孝陵卫街200号153幢":["118.860391155154","32.0326047938942"],
    "孝陵卫街200号152幢":["118.860365981005","32.0323245680295"],
    "孝陵卫街200号151幢":["118.860368494438","32.0320087677006"],
    "孝陵卫街200号150幢":["118.860387689646","32.031749735787"],
    "孝陵卫街200号149幢":["118.860341532491","32.0313600394204"],
    "孝陵卫街200号527幢":["118.852943329054","32.0345660190605"],
    "孝陵卫街200号528幢":["118.853528952232","32.0345845461985"],
    "孝陵卫街200号526幢":["118.852988711807","32.0347410454212"],
    "孝陵卫街200号525幢":["118.853623471131","32.0347764360544"],
    "孝陵卫街200号523幢":["118.853027430837","32.0349760317931"],
    "孝陵卫街200号524幢":["118.853653970817","32.0350054945895"],
    "孝陵卫街200号541-1幢":["118.852969034876","32.0353079762738"],
    "孝陵卫街200号542-1幢":["118.853630999081","32.0353058390877"],
    "三号门":["118.852605191182","32.0358367031492"],
    "第二十六舍":["118.858525647988","32.0223547821737"],
    "第二十七舍":["118.858469725191","32.0217033046377"],
    "第二十八舍":["118.858886390848","32.0213877058455"],
    "留园/明苑美食广场":["118.854255058683","32.0241977703465"],
    "教工浴室":["118.85117978579","32.0284411072913"],
    "教育超市":["118.853494526036","32.0284579350213"],
    "培训楼":["118.852575559223","32.0285498356067"],
    "孝陵卫街200号204栋":["118.851901891515","32.0285153416861"],
    "开水房":["118.851117884275","32.0284150047785"],
    "锅炉房1":["118.851321552476","32.0280764434883"],
    "学生浴室":["118.851968195624","32.0281251017023"],
    "第二十五舍":["118.852552433836","32.0282063999338"],
    "锅炉房2":["118.851954971851","32.027727140578"],
    "住宅楼":["118.851345167722","32.0276319550104"],
    "学生第二、第三食堂":["118.852538891965","32.0276727263697"],
    "第二舍":["118.853495978542","32.028123064014"],
    "第一舍":["118.854244283004","32.0281212981075"]
  },
  MigrationData: [
    {"YLY":"逸夫教学楼","MDLY":"第四教学楼","RS":2,"YJZWH":"1936","MDJZWH":"1934"},
    {"YLY":"智能机器人研究所","MDLY":"孝陵卫街200号380栋","RS":1,"YJZWH":"1972","MDJZWH":"1970"},
    {"YLY":"材料科学与工程学院","MDLY":"材料楼（在建）","RS":3,"YJZWH":"1950","MDJZWH":"78865"},
    {"YLY":"孝陵卫街200号380栋","MDLY":"基础实验楼","RS":1,"YJZWH":"1970","MDJZWH":"1969"}
  ]
}
let app = {}

function map_hot () {
  this.chart1 = echarts.init(document.getElementById('map_hot'))
  let data = this.mapdata
  let points = []
  // points 是主要数据 每一项的第一、二项表示经纬度，第三项表示值
  data.forEach(el => {
    points.push([el.JZJD, el.JZWD, el.RS])
  })
  let option = {
    animation: false,
    bmap: {
        // 初始化地图的中心点
        center: [118.856278142911, 32.0277010409315],
        zoom: 16,
        roam: true
    },
    visualMap: {
        show: false,
        top: 'top',
        min: 0,
        max: 100000,
        seriesIndex: 0,
        calculable: true,
        inRange: {
            // 热力图的颜色范围
            color: ['blue', 'blue', 'green', 'yellow', 'red']
        }
    },
    series: [{
        type: 'heatmap',
        coordinateSystem: 'bmap',
        data: points,
        pointSize: 15,
        blurSize: 6
    }]
  }
  this.chart1.setOption(option)
  if (!app.inNode) {
    // 添加百度地图插件
      var bmap = this.chart1.getModel().getComponent('bmap').getBMap();
      bmap.addControl(new BMap.MapTypeControl());
  }
}

function map_migration () {
  this.chart2 = echarts.init(document.getElementById('map_migration'))
  let data = this.MigrationData
  let series_data = []
  // 路径线的数据格式按以下series_data的格式来
  data.map(value => {
    series_data.push(
      {
        coords:[this.geoCoordMap[value.YLY], this.geoCoordMap[value.MDLY]],
        fromName: value.YLY,
        toName: value.MDLY,
        value: value.RS
      }
    )
  })
  let option = {
    bmap: {
      center: this.geoCoordMap[series_data[0].fromName],
      zoom: 16,
      roam: true
    },
    series: [{
      type: 'lines',
      coordinateSystem: 'bmap',
      zlevel: 2,
      symbol: ['none', 'arrow'],
      symbolSize: 10,
      effect: {
          show: true,
          period: 6,
          trailLength: 0,
          symbol: 'arrow',
          symbolSize: 6
      },
      lineStyle: {
          normal: {
              color: '#ff7b01',
              width: 1,
              opacity: 0.6,
              curveness: 0.2
          }
      },
      data: series_data
    }, {
      name: '',
      type: 'effectScatter',
      coordinateSystem: 'bmap',
      zlevel: 2,
      rippleEffect: {
        brushType: 'stroke'
      },
      label: {
        normal: {
          show: true,
          position: [18, 0],
          formatter: '{b}'
        }
      },
      showEffectOn: 'render',
      itemStyle: {
        normal: {
          color: '#ff7b01',
          hadowBlur: 10,
          shadowColor: '#333'
        }
      },
      data: series_data.map(val => {
        let value = this.geoCoordMap[val.fromName]
        value.push(val.value)
        return {
          name: val.fromName,
          value: value
        }
      })
    }, {
      name: '',
      type: 'effectScatter',
      coordinateSystem: 'bmap',
      zlevel: 2,
      rippleEffect: {
        brushType: 'stroke'
      },
      label: {
        normal: {
          show: true,
          position: [18, 0],
          formatter: '{b}'
        }
      },
      showEffectOn: 'render',
      itemStyle: {
        normal: {
          color: '#ff7b01',
          hadowBlur: 10,
          shadowColor: '#333'
        }
      },
      data: series_data.map(val => {
        let value = this.geoCoordMap[val.toName]
        value.push(val.value)
        return {
          name: val.toName,
          value: value
        }
      })
    }],
    tooltip: {
      trigger: 'item',
      formatter: (params, ticket, callback) => {
        if (params.data.fromName && params.data.toName) {
          let str = params.data.fromName + ' -> ' + params.data.toName + '：' + params.data.value + '人'
          return str;
        } else {
          return params.name;
        }
      }
    }
  }
  this.chart2.setOption(option)
}

function goBack () {
  window.location.href = './index.html'
}

window.onload = function () {
  map_hot.apply(data)
  map_migration.apply(data)
}